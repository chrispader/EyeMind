<!DOCTYPE html>
<html>
<head>
  <title>EyeMind</title>

  <link rel="stylesheet" href="vendor/bpmn-js/assets/diagram-js.css" />
  <link rel="stylesheet" href="vendor/bpmn-js/assets/bpmn-js.css" />
  <link rel="stylesheet" href="vendor/bpmn-js/assets/bpmn-font/css/bpmn-embedded.css" />
  <link rel="stylesheet" href="css/app.css" />




</head>
<body>

  <div class="all-content" id="all-content">

  <div class="main-view" id="main-view">
    <div class="row">

      <button id="eye-tracking" class="btn eye-tracking">Eye-tracking</button>
     <button id="analysis" class="btn analysis">Analysis</button>

    </div>

</div>


  <div class="data-collection-session-options-view" id="data-collection-session-options-view">
    <div class="row">

      <button id="new-session" class="btn new-session">New session</button>
     <button id="load-session" class="btn load-session">Load session</button>

    </div>

</div>


   <div class="data-collection-settings-view" id="data-collection-settings-view">

          <div class="data-collection-settings-box" id="data-collection-settings-box">


                <div id="settings" class="settings"> 
                  <h2>Advanced settings</h2>
                  
                  <div class="row">
                    <div class="column"><span class="text-container">Linking of sub-processes*:</span></div>
                    <div class="column"><select id="linking-sub-processes" class="form-select">
          <option value="no">No support</option>
           <option value="newTab">Symbol links</option>
           <option value="withinTab">Breadcrumb navigation</option>



        </select></div>
                  </div>

                  <div id="info-linking" class="info-link">*If linking is supported, then ids of the activities refering to collapsed sub-processes should be the same as the names of the corresponding BPMN files. </div>

                </div>
                

           <div class="proceed-data-collection-settings-btn-container"> <button class="proceed-data-collection-settings-btn" id="proceed-data-collection-settings">Proceed</button> </div>

        </div>

  </div>


   <div class="import-view" id="import-view">

          <div class="import-box" id="import-box">

                 <div class="upload-zone" id="upload-zone" ondragover="this.setAttribute('drop-active',true)" ondragleave="this.setAttribute('drop-active',false)" ondrop="this.setAttribute('drop-active',false)">
                  
                   <span  id="upload-label" class="upload-label"></span>

                    <div class="file-list" id="file-list">

                </div>

                </div>                

           <div class="process-files-btn-container"> <button class="process-files-btn" id="process-files">Load files</button> </div>

        </div>

  </div>


     <div class="fixation-settings-view" id="fixation-settings-view">

          <div class="fixation-settings-box" id="fixation-settings-box">

            <span class="close" id="close-fixation-settings-projection"><img class="close-icon" id="close-icon" src="icons/close.svg"></span>
         

             <h2 >
        Fixation Detection Settings
      </h2>
      <h3 style="padding-bottom: 30px; color:grey">
         Using the Velocity-Threshold Identification (I-VT) fixation classification algorithm
      </h3>


        <div class="section">
        <div class="title">  Interpolation: <input type="checkbox" id="is-interpolation"></div> 
        <div class="row">
        <div class="column"><span class="text"> Max gap length in ms: </span></div>
        <div class="column"> <input class="form-input is-interpolation" id="max-gap-length" type="text"  value="75" disabled/></div>
        </div>
      </div>

        <div class="section">
        <div class="title">  Noise reduction: <input type="checkbox" id="is-noice-reduction" checked></div> 
        <div class="row">
        <div class="column"><span class="text"> Method: </span></div>
        <div class="column"> <select class="form-select-short is-noice-reduction" id="noise-reduction-method">
                <option value="Average">Moving average</option>
                <option value="Median" selected>Moving median</option>
        </select></div>
        <div class="column"><span class="text"> Window size in samples: </span></div>
        <div class="column"> <input class="form-input is-noice-reduction" id="window-size" type="text"  value="3"  /></div>
        </div>
        </div>
   
        <div class="section">
        <div class="title"> Fixation filter:</div> 
        <div class="row">
        <div class="column"><span class="text"> Window length in ms: </span></div>
        <div class="column"> <input class="form-input" id="window-length" type="text" value="20" /></div>
        <div class="column"><span class="text"> Velocity threshold in degrees/second: </span></div>
        <div class="column"> <input class="form-input" id="Velocity-threshold" type="text"  value="30" /></div>
        </div>
        </div>

        <div class="section">
        <div class="title">  Discard short fixations: <input type="checkbox" id="is-discard-short-fixations" checked></div> 
        <div class="row">
        <div class="column"><span class="text"> Minimum fixation duration in ms: </span></div>
        <div class="column"> <input class="form-input is-discard-short-fixations" id="minimum-fixation-duration" type="text" value="60"/></div>
        </div>
        </div>

         <div class="section">
        <div class="title">  Merge adjacent fixations: <input type="checkbox" id="is-merge-adjacent-fixations" checked></div> 
        <div class="row">
        <div class="column"><span class="text"> Maximum time between fixations in ms: </span></div>
        <div class="column"> <input class="form-input is-merge-adjacent-fixations" id="maximum-time-between-fixations" type="text"  value="75"  /></div>
        <div class="column"><span class="text"> Maximum angle between fixations in degree: </span></div>
        <div class="column"> <input class="form-input is-merge-adjacent-fixations" id="maximum-angle-between-fixations" type="text" value="0.5" /></div>
        </div>
        </div>

        <div class="section">
        <div class="title">  Mapping Fixations to elements: </div>
        <div class="row">
        <div class="column"><span class="text"> Handling of fixation spanning over multiple elements, tabs or questions </span></div>
        <div class="column"><select id="fixation-mapping-handling" class="form-select-long">
           <option value="soft">Assign to the element/tab/question with max gaze points</option>
           <option value="hard">Discard</option>
        </select> </div>
        </div>
        </div>



         <div class="fixation-settings-btn-container"> <input type="submit" class="fixation-settings-btn" id="submit-apply-fixation-settings-form" value="Apply Settings"></div>

       </div>


        </div>

 




      <div class="loaded-content-view" id="loaded-content-view">

      <div class="top-menu"> 
            <div class="row">
              <div class="column">
                <div class="row">
                  <div class="column"><div id="mode-text" class="mode-text"></div></div>
                  <div class="column"><div id="feature-text" class="feature-text"></div></div>
                </div>
              </div>
              <div class="column"><div class="icons-container"> 

                <div id="eye-tracking-icons" class="eye-tracking-icons"><img id="record-btn" class="icon" src="icons/record_enabled.svg" width="20px" height="20px">  <img src="icons/stop_disabled.svg" id="stop-btn" style="margin-top: 10px; margin-right: 50px; " width="20px" height="20px"></div>

                  <div id="analysis-icons" class="analysis-icons">
                    <img id="fixation-filter-btn" title="Fixation filter" class="icon" src="icons/fixation-filter.svg" width="90px" height="40px" >
                    <img id="projections-mapping-btn"  title="Gaze projections and corrections"  class="icon" style="margin-left: -50px" src="icons/projections-mapping.svg" width="90px" height="40px" >
                    <img id="heatmap-btn" title="Heatmap and overlays" class="icon" src="icons/heatmap_disabled.svg" style="margin-left: -50px; padding-top: 3px;"  width="90px" height="40px">
                    <img id="download-btn" title="Download" class="icon" src="icons/download.svg" style="margin-left: -50px;"  width="90px" height="40px"> 
                  </div>

               </div></div>
          </div>
      </div>

  <div class="questions-container" id="questions-container">
      <div class="questions" id="questions">

        <div id="questions-ready" class="question gaze-element" data-element-id="questions-ready">
          <div class="answer-and-next">
            <div class="start-questions"><button class="start-questions-btn gaze-element" data-element-id="start-questions-btn" id="start-questions-btn">Start questions</button></div>
          </div>

        </div>

        <div id="questions-over" class="question gaze-element" data-element-id="questions-over">

          <div class="finished gaze-element" data-element-id="questions-finished-text">Questions finished</div>
          
        </div>

      </div>
  </div>


  <div id="user-configuration" class="user-configuration">
    <div class='row'>
      <div class='column-title'>
        <span class='title-text-container'>User Configuration</span>
      </div>
      <div class='column'>
        <div id="user-config-content"></div>
      </div>
  </div>
</div>


  <div id="gaze-correction" class="gaze-correction">
    <div class='row'>
      <div class='column-title'>
        <span class='title-text-container'>General offset correction</span>
      </div>
      <div class='column'>
        <span class='field-text-container'>x offset: </span>
      </div>
      <div class='column'>
        <input class='form-input' type='number' id='gaze-correction-x-offset-model'/>
      </div>
      <div class='column'>
        <span class='field-text-container'>y offset: </span>
      </div>
      <div class='column'>
        <input class='form-input' type='number' id='gaze-correction-y-offset-model'/>
      </div>
      <div class='column'>
      </div>
      <div class='column'>
        <button class='btn' id='update-correction-offset'>Update</button>
      </div>
      <div class="column" style="width: 200px">
        
      </div>
      <div class="column">
        <button class='btn-long' id='apply-correction-offset'>Apply correction to data</button>
      </div>
    </div>
  </div>


  <div class="nav-tabs-and-tabs" id="nav-tabs-and-tabs">
  <div id="nav-tabs-container" class="nav-tabs-container">
    <div id="to-tab-left" class="to-tab-left gaze-element" data-element-id="to-tab-left-button"><</div>
    <div class="nav-tabs" id="nav-tabs"></div>
    <div id="to-tab-right" class="to-tab-right gaze-element" data-element-id="to-tab-right-button">></div>
  </div>


  <div class="tabs" id="tabs">
  <div id="explorer" class="explorer gaze-element" data-element-id="file-explorer-area">
    <ul id="explorer-groups" class="root"></ul>
  </div>
  <div id="tabs-containers" class="tabs-containers"> 
    <div id="process-hierarchy" class="process-hierarchy">
      <div id="process-hierarchy-content" class="process-hierarchy-content gaze-element" data-element-id="process-hierarchy-content-area"></div>
    </div>
    <div id="index-tab" class="index-tab"> <!--- Could be used for instructions ---></div>
  </div>
</div>


</div>
</div>

<div id="startET-modal" class="startET-modal">
  <div class="content">
    <span class="close" id="close-startET-modal"><img class="close-icon" id="close-icon" src="icons/close.svg"></span>
    

      <h2>
        Data Collection Settings
      </h2>


      <div>

        <div class="row">
        <div class="column"><span class="text"> X Screen dimension in pixels*: </span></div>
        <div class="column"> <input class="form-input" id="x-dim" type="text"   /></div></div>

        <div class="row">
        <div class="column"><span class="text"> Y Screen dimension in pixels*: </span></div>
        <div class="column"> <input class="form-input" id="y-dim" type="text"  /></div></div>

        <div class="row">
        <div class="column"><span class="text"> Screen distance in centimeters*: </span></div>
        <div class="column"> <input class="form-input" id="screen-distance" type="text"  value="" /></div></div>

        <div class="row">
        <div class="column"><span class="text"> Monitor size in inches*: </span></div>
        <div class="column"> <input class="form-input" id="monitor-size" type="text"  /></div></div>


        <div class="row">
        <div class="column"><span class="text"> Recording ID*: </span></div>
        <div class="column"> <input class="form-input" id="recording-id" type="text" /></div></div>


        <div class="row">
        <div class="column"><span class="text"> Participant ID: </span></div>
        <div class="column"> <input class="form-input" id="participant-id" type="text" /></div></div>

                <div class="row">
        <div class="column"><span class="text"> Experiment ID: </span></div>
        <div class="column"> <input class="form-input" id="experiment-id" type="text" /></div></div>
 

        <div class="row">
        <div class="column"><span class="text"> Experimenter ID:</span> </div>
        <div class="column"> <input class="form-input" id="experimenter-id" type="text" /></div></div>



        <div class="row">
        <div class="column"><span class="text"> Additional notes: </span></div>
        <div class="column"> <textarea class="form-input" id="additional-notes" rows="4" cols="25"></textarea></div></div>


          <div class="row">
          <center><input type="submit" class="submit-form-button" id="submit-recording-form" value="Start recording" >
          </input>
          <input type="submit" class="save-session" id="save-session" value="Save Session" >
          </input>
           </center>
        </div>

          <div class="row">
          <center>* required fields </center>
        </div>

      </div>


  </div>
  </div>


  <div id="heatmap-settings-modal" class="heatmap-settings-modal">
    <div class="content">
       <span class="close" id="close-heatmap-settings"><img class="close-icon" id="close-icon" src="icons/close.svg"></span>

      <h2>
        Heatmap Settings
      </h2>

        <div>

        <div class="row">
        <div class="column"><span class="text">Participant  (File) </span></div>
        <div class="column"> <select class="form-select-multiple" multiple id="participants-files-heatmap">
        </select>
        </div>
      </div>

        <div class="row">
        <div class="column"><span class="text">Question ID: </span></div>
        <div class="column"> <select class="form-select" id="question">
                <option value="">Select</option>
        </select>
        </div>
      </div>

        <div class="row">
        <div class="column"><span class="text">Measure: </span></div>
        <div class="column"> <select class="form-select" id="measure">
                <option measure="" measureType="" aggregations="">Select</option>
                <option measure="visit_duration" measureType="element_level" aggregations="sum-max-min-mean">Visit Duration (From Fixations)</option>
                <option measure="visit_count" measureType="element_level" aggregations="count">Visit Count (From Fixations)</option>
                 <option measure="visit_duration" measureType="gaze_level" aggregations="sum-max-min-mean">Visit Duration (From Gazes)</option>
                <option measure="visit_count" measureType="gaze_level" aggregations="count">Visit Count (From Gazes)</option>

                <option measure="Fixation Duration" measureType="fixation_level" aggregations="sum-max-min-mean">Fixation Duration</option>
                <option measure="Fixation Count" measureType="fixation_level" aggregations="count">Fixation Count</option>
        </select>
        </div>
      </div>


        <div class="row">
        <div class="column"><span class="text">Aggregation function: </span></div>
        <div class="column"> <select class="form-select" id="aggregation">
                <option id="no-aggr" value="" aggregationType="" class="" >Select</option>
                <option id="sum-aggr" value="sum" aggregationType="time" class="aggr" >Sum</option>
                <option id="max-aggr" value="max" aggregationType="time" class="aggr"  >Max</option>
                <option id="min-aggr" value="min" aggregationType="time" class="aggr" >Min</option>
                <option id="mean-aggr" value="mean" aggregationType="time" class="aggr" >Mean</option>
                <option id="count-aggr" value="count" aggregationType="number" class="aggr" >Count</option>
        </select>
        </div>
      </div>


         <div class="row">
        <div class="column"><span class="text">Timestamp unit: </span></div>
        <div class="column"> <select class="form-select" id="timestamp-unit">
                <option value="s"  >Second</option>
                <option value="ms" selected>Millisecond</option>
                <option value="us"  >Microsecond</option>
        </select>
        </div>
      </div>

        <div class="row">
         <div class="column"><span class="text">Additionally include pools and lanes:</span></div>
         <div class="column"><input class="form-check-box" type="checkbox" id="inc-pools-lanes"/></div>
        </div>

        <div class="row">
         <div class="column"><span class="text">Additionally include groups (border only):</span></div>
         <div class="column"><input class="form-check-box" type="checkbox" id="inc-groups" /></div>
        </div>

        <div class="row">
        <div class="column"><span class="text">Additionally include expended sub-processes:</span></div>
         <div class="column"><input class="form-check-box" type="checkbox" id="inc-expended-sub-processes"/></div>

        </div>

        <div class="row">
         <div class="column"><span class="text">Additionally include processes:</span></div>
         <div class="column"><input class="form-check-box" type="checkbox" id="inc-processes" /></div>
        </div>

        <div class="row">
         <div class="column"><span class="text">Additionally include edges:</span></div>
         <div class="column"><input class="form-check-box" type="checkbox" id="inc-edges" /></div>
        </div>


          <div class="row">
          <center><input type="submit" class="submit-form-button" id="submit-heatmap-form" value="Show heatmap" ></center>
         </div>

        </div>

    </div>
  </div>



<div id="download-modal" class="download-modal">
    <div class="content">
       <span class="close" id="close-download"><img class="close-icon" id="close-icon" src="icons/close.svg"></span>

      <h2>
        Export Options
      </h2>

        <div>

        <div class="row">
        <div class="column"><span class="text">File type </span></div>
        <div class="column"> <select class="form-select" id="download-file-type">
                <option value="analysis-data">Analysis File</option>
                <option value="gaze-data">Gaze Data</option>
                <option value="fixation-data">Fixation Data</option>
                
        </select>
        </div>
      </div>

          <div class="row">
          <center><input type="submit" id="submit-download-form" class="submit-form-button" value="Download" ></center>
         </div>

        </div>

    </div>
  </div>


<div id="gaze-projection-modal" class="gaze-projection-modal">
    <div class="content">
       <span class="close" id="close-gaze-projection"><img class="close-icon" id="close-icon" src="icons/close.svg"></span>

      <h2>
        Gaze Projection Settings
      </h2>

        <div>



        <div class="row">
        <div class="column"><span class="text">Gaze sample Size* </span></div>
        <div class="column"><input class="form-input" id="gaze-sample-size-in-percentage" type="text" value="20" /> %
        </div>
      </div>


        <div class="row">
        <div class="column"><span class="text">Participant (File) </span></div>
        <div class="column"><select class="form-select" id="participant-file-gaze-projection">
                <option value="">Select</option>
        </select>
        </div>
      </div>          
    

          <div class="row">
          <center>
            <input type="submit" id="submit-gaze-projection-form" class="submit-form-button" value="Generate Gaze Projections" ></center>
         </div>

         <div class="row">
            <div id="info-gaze-projections" class="info-gaze-projections">*For better performance, it is recommended to choose a small sample size.</div>
         </div>

        </div>

    </div>
  </div>





  </div>

  <div id="wait" class="wait">
    <div class="centered-content">
      <div id="wait-title"></div><br>
      <div id="wait-progress"></div><br>
      <img class="wait-icon" id="wait-icon" src="icons/loading.jpg">
    </div>
  </div>

  <div id="finished-processing-gaze-data" class="finished-processing-gaze-data">
     <div class="centered-content">
      <div class="centered-content">Processing Finished. <br><br> Close the app or use Crtl+R to reload it for further data collection or analysis.</div>
    </div>
  </div>  



  <script src="app.js"></script>
 


</html>
